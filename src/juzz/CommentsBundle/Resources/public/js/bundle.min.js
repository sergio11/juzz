!function e(t,n,a){function r(s,l){if(!n[s]){if(!t[s]){var i="function"==typeof require&&require;if(!l&&i)return i(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,a)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<a.length;s++)r(a[s]);return r}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.NO_POST_COMMENTS_TO_REVISE=4,n.NO_COMMENTS_ALLOWED=5},{}],2:[function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var r=e("react"),o=a(r),s=e("react-dom"),l=a(s),i=e("./wall"),u=a(i),c=document.getElementById("comment_wall_container"),f=c.dataset.user&&JSON.parse(c.dataset.user),d=c.dataset.target,p=c.dataset.policy&&JSON.parse(c.dataset.policy);l["default"].render(o["default"].createElement(u["default"],{user:f,target:d,policy:p}),document.getElementById("comments-point-mount"))},{"./wall":6,react:"react","react-dom":"react-dom"}],3:[function(e,t,n){(function(t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),u=a(i),c="undefined"!=typeof window?window.Routing:"undefined"!=typeof t?t.Routing:null,f=a(c),d=function(e){function t(e){r(this,t);var n=o(this,Object.getPrototypeOf(t).call(this,e));return n.state={likes:[],dislikes:[]},n}return s(t,e),l(t,null,[{key:"DISLIKE",get:function(){return 2}},{key:"LIKE",get:function(){return 1}}]),l(t,[{key:"componentWillMount",value:function(){var e=[],t=[];this.props.assess.forEach(function(n){1==n.assess?e.push(n):t.push(n)}),this.setState({likes:e,dislikes:t})}},{key:"assessComment",value:function(e){var t=f["default"].generate("comment_assess",{target:this.props.comment});return $.post(t,{data:{user:this.props.user,comment:this.props.comment,value:e}})}},{key:"addLike",value:function(e){var n=this;e.preventDefault(),this.assessComment(t.LIKE).done(function(e){if(e=JSON.parse(e),console.log(e),e.success){var t=n.state.likes.slice();t.push(e.data),n.setState({likes:t})}}).fail(function(e){console.log("Fail!!!"),console.log(e)})}},{key:"addDislike",value:function(e){var n=this;e.preventDefault(),this.assessComment(t.DISLIKE).done(function(e){if(e=JSON.parse(e),console.log(e),e.success){var t=n.state.dislikes.slice();t.push(e.data),n.setState({dislikes:t})}}).fail(function(e){console.log("Fail!!!"),console.log(e)})}},{key:"render",value:function(){return u["default"].createElement("ul",{className:"list-inline"},u["default"].createElement("li",null,u["default"].createElement("a",{href:"#",onClick:this.addLike.bind(this)},u["default"].createElement("span",{className:"fa fa-thumbs-o-up"})," Me gusta ",u["default"].createElement("span",null,"(",this.state.likes.length,")"))),u["default"].createElement("li",null,u["default"].createElement("a",{href:"#",onClick:this.addDislike.bind(this)},u["default"].createElement("span",{className:"fa fa-thumbs-o-down"})," No Me Gusta ",u["default"].createElement("span",null,"(",this.state.dislikes.length,")"))))}}]),t}(u["default"].Component);n["default"]=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{react:"react"}],4:[function(e,t,n){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("react"),c=r(u),f=e("../userpost"),d=r(f),p=e("../likes_dislikes_bar"),m=r(p),h="undefined"!=typeof window?window.Routing:"undefined"!=typeof t?t.Routing:null,y=r(h),v=e("../constants.js"),g=a(v),w=function(e){function t(e){o(this,t);var n=s(this,Object.getPrototypeOf(t).call(this,e));return n.state={answerMode:!1,reviseMode:!1,comments:e.data.comments},n}return l(t,e),i(t,[{key:"saveAnswer",value:function(e){var t=this;if(13==e.which){this.setState({answerMode:!1});var n=e.target.value.trim();""!=n&&($.post(y["default"].generate("post_comment"),{data:{content:n,target:this.props.data.target,parent:this.props.data.id,owner:this.props.user.id}}).done(function(e){e=JSON.parse(e),e.success&&(t.state.comments.unshift(e.data),t.props.policy.id==g.NO_POST_COMMENTS_TO_REVISE?t.setState({reviseMode:!0}):t.forceUpdate())}).fail(function(e){console.log("Fail!!!"),console.log(e)}),e.target.value="",e.preventDefault(),e.stopPropagation())}}},{key:"answer",value:function(e){e.preventDefault(),this.setState({answerMode:!0})}},{key:"cancel",value:function(e){e.preventDefault(),this.setState({answerMode:!1})}},{key:"renderAssessBar",value:function(){var e=null;return this.props.data.owner.id!=this.props.user.id&&(e=c["default"].createElement(m["default"],{user:this.props.user.id,comment:this.props.data.id,assess:this.props.data.assess})),e}},{key:"renderCommentsList",value:function(){var e=this,n=null;return this.state.comments.length&&(n=c["default"].createElement("ul",{className:"list-group"},this.state.comments.map(function(n){return c["default"].createElement(t,{key:n.id,data:n,user:e.props.user})}))),n}},{key:"renderAnswerBlock",value:function(){var e=void 0;return this.props.data.owner.id!=this.props.user.id&&(e=this.state.answerMode?c["default"].createElement("div",{className:"row"},c["default"].createElement(d["default"],{user:this.props.user,onSave:this.saveAnswer.bind(this),placeholder:"Contestación para "+this.props.data.owner.fullName}),c["default"].createElement("div",{className:"col-lg-4 col-lg-offset-8 text-right v-padding"},c["default"].createElement("a",{href:"#",className:"btn btn-danger",onClick:this.cancel.bind(this)},"Cancelar"))):this.state.reviseMode?c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"alert alert-warning"},c["default"].createElement("span",{className:"fa fa-exclamation-triangle"}),"El comentario debe ser revisado, cuando sea publicado recibirás una notificación")):c["default"].createElement("div",{className:"row"},c["default"].createElement("div",{className:"col-lg-4 col-lg-offset-8 text-right v-padding"},c["default"].createElement("a",{href:"#",className:"btn btn-primary",onClick:this.answer.bind(this)},"Responder")))),e}},{key:"render",value:function(){return c["default"].createElement("li",{className:"list-group-item"},c["default"].createElement("div",{className:"media"},c["default"].createElement("div",{className:"media-left"},c["default"].createElement("a",{href:y["default"].generate("perfil",{user:this.props.data.owner.nick})},c["default"].createElement("img",{className:"media-object img-circle",width:"70",src:this.props.data.owner.avatar.data,alt:""}))),c["default"].createElement("div",{className:"media-body"},c["default"].createElement("ul",{className:"list-inline"},c["default"].createElement("li",null,c["default"].createElement("h4",{className:"media-heading"},c["default"].createElement("a",{href:y["default"].generate("perfil",{user:this.props.data.owner.nick})},this.props.data.owner.fullName))),c["default"].createElement("li",null,new Date(this.props.data.datetime).toLocaleString())),this.renderAssessBar(),c["default"].createElement("p",null,this.props.data.text))),this.renderCommentsList(),this.renderAnswerBlock())}}]),t}(c["default"].Component);n["default"]=w}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants.js":1,"../likes_dislikes_bar":3,"../userpost":5,react:"react"}],5:[function(e,t,n){(function(t){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var i=e("react"),u=a(i),c="undefined"!=typeof window?window.Routing:"undefined"!=typeof t?t.Routing:null,f=a(c),d=function(e){function t(){return r(this,t),o(this,Object.getPrototypeOf(t).apply(this,arguments))}return s(t,e),l(t,[{key:"render",value:function(){return u["default"].createElement("div",{className:"col-lg-12"},u["default"].createElement("div",{className:"media"},u["default"].createElement("div",{className:"media-left"},u["default"].createElement("a",{href:f["default"].generate("perfil",{user:this.props.user.nick})},u["default"].createElement("img",{className:"media-object img-circle",width:"75",src:this.props.user.avatar.data,alt:""}))),u["default"].createElement("div",{className:"media-body"},u["default"].createElement("h4",{className:"media-heading"},u["default"].createElement("a",{href:f["default"].generate("perfil",{user:this.props.user.nick})},this.props.user.fullName)),u["default"].createElement("div",{className:"form-group"},u["default"].createElement("textarea",{className:"form-control",rows:"3",onKeyPress:this.props.onSave,placeholder:this.props.placeholder?this.props.placeholder:"Post Something"})))))}}]),t}(u["default"].Component);n["default"]=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{react:"react"}],6:[function(e,t,n){(function(t){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();Object.defineProperty(n,"__esModule",{value:!0});var u=e("react"),c=r(u),f="undefined"!=typeof window?window.Routing:"undefined"!=typeof t?t.Routing:null,d=r(f),p=e("../posts"),m=r(p),h=e("../userpost"),y=r(h),v="undefined"!=typeof window?window.$:"undefined"!=typeof t?t.$:null,g=r(v),w=e("../constants.js"),b=a(w),E=function(e){function t(e,n){o(this,t);var a=s(this,Object.getPrototypeOf(t).call(this,e,n));return a.state={load:!1,posts:[]},a}return l(t,e),i(t,[{key:"componentDidMount",value:function(){var e=this,t=d["default"].generate("comments",{target:this.props.target});g["default"].getJSON(t).done(function(t){t.success&&(console.log("POST"),console.log(t.data),e.setState({posts:t.data}))}).fail(function(e){console.log("Fail!!!"),console.log(e)}).always(function(){e.setState({load:!0})})}},{key:"deletePost",value:function(e){var t=this.state.posts.indexOf(e);this.state.posts.splice(t,1),this.forceUpdate()}},{key:"createPost",value:function(e){var t=this;if(13==e.charCode){var n=e.target.value;n&&""!=n&&(g["default"].post(d["default"].generate("post_comment"),{data:{content:n,target:this.props.target,parent:null,owner:this.props.user.id}}).done(function(e){e=JSON.parse(e),e.success&&(t.state.posts.unshift(e.data),t.forceUpdate())}).fail(function(e){console.log("Fail!!!"),console.log(e)}),e.target.value="",e.preventDefault())}}},{key:"renderHeader",value:function(){var e=void 0;return e=this.props.policy.id==b.NO_COMMENTS_ALLOWED?c["default"].createElement("div",{className:"alert alert-danger"},"El usuario no permite comentarios"):c["default"].createElement(y["default"],{user:this.props.user,onSave:this.createPost.bind(this)})}},{key:"renderContent",value:function(){var e=this,t=void 0;return t=this.state.load?this.state.load&&!this.state.posts.length?c["default"].createElement("div",{className:"alert alert-info"},"No hay comentarios, sé el primero."):this.state.posts.map(function(t){var n=e.deletePost.bind(e,t);return c["default"].createElement(m["default"],{key:t.id,data:t,user:e.props.user,policy:e.props.policy,onDelete:n})}):c["default"].createElement("div",{className:"alert alert-info"},"Cargándo")}},{key:"render",value:function(){return c["default"].createElement("div",{className:"container-fluid"},c["default"].createElement("div",{className:"row v-padding"},this.renderHeader()),c["default"].createElement("ul",{className:"list-group list-group-root"},this.renderContent()))}}]),t}(c["default"].Component);n["default"]=E}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../constants.js":1,"../posts":4,"../userpost":5,react:"react"}]},{},[2,3,4,5,6]);